import{r as x,j as o,e,u as g,c as v,o as b,d as N,B as y,k,i as M,D as E,f as C}from"./index.fe38f90d.js";import{B as L}from"./Button.99066038.js";import{u as _}from"./user.api.d78247fe.js";function h({name:s,className:t,errorMessage:u,register:d,rules:w,classNameInput:f="p-3 w-full outline-none border border-gray-300 focus:border-gray-500 rounded-sm focus:shadow-sm",classNameError:n="mt-1 text-red-600 min-h-[1.25rem] text-sm",classNameEye:i="absolute top-[8px] right-[5px] h-5 w-5 cursor-pointer",...l}){const[r,c]=x.exports.useState(!1),m=d&&s?d(s,w):null,a=()=>{c(p=>!p)};return o("div",{className:t,children:[e("input",{className:f,...l,...m,type:r?"text":"password",autoComplete:"on"}),r&&o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i,onClick:a,children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),!r&&e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i,onClick:a,children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}),e("div",{className:n,children:u})]})}const S=E.pick(["password","new_password","confirm_password"]);function B(){const{t:s}=g(),{register:t,handleSubmit:u,reset:d,setError:w,formState:{errors:f}}=v({defaultValues:{password:"",new_password:"",confirm_password:""},resolver:b(S),shouldFocusError:!1}),n=N({mutationFn:_.updateProfile,onSuccess:r=>{y.success(r.data.message,{position:"top-center",autoClose:1e3}),d()}}),i=u(r=>{n.mutate(k.exports.omit(r,["confirm_password"]),{onError:c=>{var m;if(M(c)){const a=(m=c.response)==null?void 0:m.data.data;a&&Object.keys(a).forEach(p=>{w(p,{message:a[p],type:"Server"})})}}})}),l=r=>C(f,r);return o("div",{className:"rounded-sm bg-white px-2 pb-10 shadow md:px-7 md:pb-20",children:[o("div",{className:"border-b border-b-gray-200 py-6",children:[e("h1",{className:"text-lg font-medium capitalize text-gray-900",children:s("change password")}),e("div",{className:"mt-1 text-sm text-gray-700",children:s("protect account")})]}),e("form",{className:"mt-8 mr-auto max-w-3xl",onSubmit:i,children:o("div",{className:"mt-6 flex-grow md:mt-0 md:pr-12",children:[o("div",{className:"relative mt-2 flex flex-col flex-wrap sm:flex-row",children:[e("div",{className:"truncate pt-3 capitalize sm:w-[30%] sm:text-right",children:s("current password")}),e("div",{className:"sm:w-[70%] sm:pl-5",children:e(h,{classNameInput:"w-full rounded-sm border border-gray-300 px-3 py-2 outline-none focus:border-gray-500 focus:shadow-sm",name:"password",placeholder:s("current password"),errorMessage:l("password"),register:t})})]}),o("div",{className:"relative mt-2 flex flex-col flex-wrap sm:flex-row",children:[e("div",{className:"truncate pt-3 capitalize sm:w-[30%] sm:text-right",children:s("new password")}),e("div",{className:"sm:w-[70%] sm:pl-5",children:e(h,{classNameInput:"w-full rounded-sm border border-gray-300 px-3 py-2 outline-none focus:border-gray-500 focus:shadow-sm",name:"new_password",placeholder:s("new password"),errorMessage:l("new_password"),register:t})})]}),o("div",{className:"relative mt-2 flex flex-col flex-wrap sm:flex-row",children:[e("div",{className:"truncate pt-3 capitalize sm:w-[30%] sm:text-right",children:s("confirm password")}),e("div",{className:"sm:w-[70%] sm:pl-5",children:e(h,{classNameInput:"w-full rounded-sm border border-gray-300 px-3 py-2 outline-none focus:border-gray-500 focus:shadow-sm",name:"confirm_password",placeholder:s("confirm password"),errorMessage:l("confirm_password"),register:t})})]}),o("div",{className:"mt-2 flex flex-col flex-wrap sm:flex-row",children:[e("div",{className:"truncate pt-3 capitalize sm:w-[30%] sm:text-right"}),e("div",{className:"sm:w-[70%] sm:pl-5",children:e(L,{className:"flex h-9 items-center rounded-sm bg-orange px-5 text-center text-sm text-white hover:bg-orange/80",type:"submit",isLoading:n.isPending,disabled:n.isPending,children:s("save")})})]})]})})]})}export{B as default};
