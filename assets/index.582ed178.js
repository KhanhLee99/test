import{u as N,a as y,c as B,o as E,r as j,U as g,h as u,k as w,j as o,e,C as _,N as z,p as C,L as b,m as f,n as R,P as D,q as G,s as k,H,t as T}from"./index.fe38f90d.js";import{P as W,p as $}from"./Product.da99031d.js";import{B as L}from"./Button.99066038.js";import{I as S}from"./InputNumber.60ca6041.js";function I({queryConfig:a}){var x;const{t:r}=N(),t=y(),{control:l,handleSubmit:i,trigger:s,reset:c,formState:{errors:m}}=B({defaultValues:{price_min:a.price_min||"",price_max:a.price_max||""},resolver:E(C),shouldFocusError:!1});j.exports.useEffect(()=>{const{price_min:n,price_max:v}=a;!n&&!v&&c({price_min:"",price_max:""})},[a.price_min,a.price_max]);const d=i(n=>{const{price_min:v="",price_max:P=""}=n;t({pathname:g.productList,search:u(w.exports.omitBy({...a,price_min:v,price_max:P},F=>F==="")).toString()})});return o("form",{className:"mt-2",onSubmit:d,children:[o("div",{className:"flex items-start",children:[e(_,{control:l,name:"price_min",render:({field:n})=>e(S,{type:"text",className:"grow",placeholder:r("price min"),classNameInput:"p-1 w-full outline-none border border-gray-300 focus:border-gray-500 rounded-sm focus:shadow-sm",classNameError:"hidden",value:n.value,ref:n.ref,onChange:v=>{n.onChange(v),s("price_max")}})}),e("div",{className:"mx-2 mt-2 shrink-0",children:"-"}),e(_,{control:l,name:"price_max",render:({field:n})=>e(S,{type:"text",className:"grow",placeholder:r("price max"),classNameInput:"p-1 w-full outline-none border border-gray-300 focus:border-gray-500 rounded-sm focus:shadow-sm",classNameError:"hidden",value:n.value,ref:n.ref,onChange:v=>{n.onChange(v),s("price_min")}})})]}),e("div",{className:"mt-1 min-h-[1.25rem] text-center text-sm text-red-600",children:(x=m.price_min)!=null&&x.message?r(`${z}:${m.price_min.message}`):""}),e(L,{className:"flex w-full items-center justify-center bg-orange p-2 text-sm uppercase text-white hover:bg-orange/80",children:r("apply")})]})}function U({queryConfig:a}){const{t:r}=N(),t=y(),l=i=>{t({pathname:g.productList,search:u({...a,rating_filter:String(i)}).toString()})};return e("ul",{className:"my-3",children:Array(5).fill(0).map((i,s)=>e("li",{className:"py-1 pl-2",children:o("div",{className:"flex cursor-pointer items-center text-sm",onClick:()=>l(5-s),tabIndex:0,role:"button","aria-hidden":"true",children:[Array(5).fill(0).map((c,m)=>m<5-s?o("svg",{viewBox:"0 0 9.5 8",className:"mr-1 h-4 w-4",children:[o("defs",{children:[o("linearGradient",{id:"ratingStarGradient",x1:"50%",x2:"50%",y1:"0%",y2:"100%",children:[e("stop",{offset:0,stopColor:"#ffca11"}),e("stop",{offset:1,stopColor:"#ffad27"})]}),e("polygon",{id:"ratingStar",points:"14.910357 6.35294118 12.4209136 7.66171903 12.896355 4.88968305 10.8823529 2.92651626 13.6656353 2.52208166 14.910357 0 16.1550787 2.52208166 18.9383611 2.92651626 16.924359 4.88968305 17.3998004 7.66171903"})]}),e("g",{fill:"url(#ratingStarGradient)",fillRule:"evenodd",stroke:"none",strokeWidth:1,children:e("g",{transform:"translate(-876 -1270)",children:e("g",{transform:"translate(155 992)",children:e("g",{transform:"translate(600 29)",children:e("g",{transform:"translate(10 239)",children:e("g",{transform:"translate(101 10)",children:e("use",{stroke:"#ffa727",strokeWidth:".5",xlinkHref:"#ratingStar"})})})})})})})]},m):o("svg",{viewBox:"0 0 30 30",className:"mr-1 h-4 w-4",children:[e("defs",{children:o("linearGradient",{id:"star__hollow",x1:"50%",x2:"50%",y1:"0%",y2:"99.0177926%",children:[e("stop",{offset:"0%",stopColor:"#FFD211"}),e("stop",{offset:"100%",stopColor:"#FFAD27"})]})}),e("path",{fill:"none",fillRule:"evenodd",stroke:"url(#star__hollow)",strokeWidth:2,d:"M23.226809 28.390899l-1.543364-9.5505903 6.600997-6.8291523-9.116272-1.4059447-4.01304-8.63019038-4.013041 8.63019038-9.116271 1.4059447 6.600997 6.8291523-1.543364 9.5505903 8.071679-4.5038874 8.071679 4.5038874z"})]},m)),s!==0&&e("span",{children:r("rating up")})]})},s))})}function K({queryConfig:a,categories:r}){const{t}=N(),{category:l}=a,i=y(),s=()=>{i({pathname:g.productList,search:u(w.exports.omit(a,["category","price_min","price_max","rating_filter"])).toString()})};return o("div",{className:"py-4",children:[o(b,{to:{pathname:g.productList,search:u(w.exports.omit(a,["category"])).toString()},className:f("flex items-center font-bold",{"text-orange":!l}),children:[e("svg",{viewBox:"0 0 12 10",className:"mr-3 h-4 w-3 fill-current",children:e("g",{fillRule:"evenodd",stroke:"none",strokeWidth:1,children:e("g",{transform:"translate(-373 -208)",children:e("g",{transform:"translate(155 191)",children:o("g",{transform:"translate(218 17)",children:[e("path",{d:"m0 2h2v-2h-2zm4 0h7.1519633v-2h-7.1519633z"}),e("path",{d:"m0 6h2v-2h-2zm4 0h7.1519633v-2h-7.1519633z"}),e("path",{d:"m0 10h2v-2h-2zm4 0h7.1519633v-2h-7.1519633z"})]})})})})}),t("all categories")]}),e("div",{className:"my-4 h-[1px] bg-gray-300"}),e("ul",{children:r.map(c=>{const m=l===c._id;return e("li",{className:"py-2 pl-2",children:o(b,{to:{pathname:g.productList,search:u({...a,category:c._id}).toString()},className:f("relative px-2",{"font-semibold text-orange":m}),children:[e("svg",{viewBox:"0 0 4 7",className:"absolute top-1 left-[-10px] h-2 w-2 fill-orange",children:e("polygon",{points:"4 3.5 0 0 0 7"})}),c.name]})},c._id)})}),o("div",{className:"mt-4 flex items-center font-bold uppercase",children:[e("svg",{enableBackground:"new 0 0 15 15",viewBox:"0 0 15 15",x:0,y:0,className:"mr-3 h-4 w-3 fill-current stroke-current",children:e("g",{children:e("polyline",{fill:"none",points:"5.5 13.2 5.5 5.8 1.5 1.2 13.5 1.2 9.5 5.8 9.5 10.2",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10})})}),t("filter search")]}),e("div",{className:"my-4 h-[1px] bg-gray-300"}),o("div",{className:"my-5",children:[e("div",{children:t("price range")}),e(I,{queryConfig:a})]}),e("div",{className:"my-4 h-[1px] bg-gray-300"}),e("div",{className:"text-sm",children:t("rating")}),e(U,{queryConfig:a}),e("div",{className:"my-4 h-[1px] bg-gray-300"}),e(L,{className:"flex w-full items-center justify-center bg-orange p-2 text-sm uppercase text-white hover:bg-orange/80",onClick:s,children:t("clear all")})]})}const h={createdAt:"createdAt",view:"view",sold:"sold",price:"price"},A={asc:"asc",desc:"desc"};function M({queryConfig:a}){const{t:r}=N(),t=y(),{sort_by:l=h.createdAt,order:i}=a,s=d=>l===d,c=d=>{t({pathname:g.productList,search:u(w.exports.omit({...a,sort_by:d},["order"])).toString()})},m=d=>{t({pathname:g.productList,search:u({...a,sort_by:h.price,order:d}).toString()})};return e("div",{className:"bg-gray-300/40 py-4 px-3",children:e("div",{className:"flex flex-wrap items-center justify-between gap-2",children:o("div",{className:"flex flex-wrap items-center gap-2",children:[e("div",{children:r("sort by")}),e("button",{onClick:()=>c(h.view),className:f("h-8 px-4 text-center text-sm capitalize ",{"bg-orange text-white hover:bg-orange/80":s(h.view),"bg-white text-black hover:bg-slate-100":!s(h.view)}),children:r("popular")}),e("button",{onClick:()=>c(h.createdAt),className:f("h-8 px-4 text-center text-sm capitalize ",{"bg-orange text-white hover:bg-orange/80":s(h.createdAt),"bg-white text-black hover:bg-slate-100":!s(h.createdAt)}),children:r("latest")}),e("button",{onClick:()=>c(h.sold),className:f("h-8 px-4 text-center text-sm capitalize ",{"bg-orange text-white hover:bg-orange/80":s(h.sold),"bg-white text-black hover:bg-slate-100":!s(h.sold)}),children:r("top sales")}),o("select",{className:f("h-8  px-4 text-left text-sm capitalize  outline-none ",{"bg-orange text-white hover:bg-orange/80":s(h.price),"bg-white text-black hover:bg-slate-100":!s(h.price)}),value:i||"",onChange:d=>m(d.target.value),children:[e("option",{value:"",disabled:!0,className:"bg-white text-black",children:r("price")}),e("option",{value:A.asc,className:"bg-white text-black",children:r("price low to high")}),e("option",{value:A.desc,className:"bg-white text-black",children:r("price high to low")})]})]})})})}const p=2;function Q({queryConfig:a,pageSize:r}){const t=Number(a.page),l=()=>{let i=!1,s=!1;const c=d=>s?null:(s=!0,e("span",{className:"mx-2 rounded border bg-white px-3 py-2 shadow-sm",children:"..."},d)),m=d=>i?null:(i=!0,e("span",{className:"mx-2 rounded border bg-white px-3 py-2 shadow-sm",children:"..."},d));return Array(r).fill(0).map((d,x)=>{const n=x+1;if(t<=p*2+1&&n>t+p&&n<r-p+1)return m(x);if(t>p*2+1&&t<r-p*2){if(n<t-p&&n>p)return c(x);if(n>t+p&&n<r-p+1)return m(x)}else if(t>=r-p*2&&n>p&&n<t-p)return c(x);return e(b,{to:{pathname:g.productList,search:u({...a,page:n.toString()}).toString()},className:f("mx-2 cursor-pointer rounded border bg-white px-3 py-2 shadow-sm",{"border-cyan-500":n===t,"border-transparent":n!==t}),children:n},x)})};return o("div",{className:"mt-6 flex flex-wrap justify-center",children:[t===1?e("span",{className:"mx-2 cursor-not-allowed rounded border bg-white/60 px-3 py-2  shadow-sm",children:"Prev"}):e(b,{to:{pathname:g.productList,search:u({...a,page:(t-1).toString()}).toString()},className:"mx-2 cursor-pointer rounded border bg-white px-3 py-2  shadow-sm",children:"Prev"}),l(),t===r?e("span",{className:"mx-2 cursor-not-allowed rounded border bg-white/60 px-3 py-2  shadow-sm",children:"Next"}):e(b,{to:{pathname:g.productList,search:u({...a,page:(t+1).toString()}).toString()},className:"mx-2 cursor-pointer rounded border bg-white px-3 py-2  shadow-sm",children:"Next"})]})}const O={getCategories(){return R.get(D.categories)}},V=O,J="/test/assets/empty.27da84ba.png";function ee(){const{t:a}=N(),r=G(),{data:t}=k({queryKey:["products",r],queryFn:()=>$.getProducts(r),placeholderData:T,staleTime:3*60*1e3}),{data:l}=k({queryKey:["categories"],queryFn:()=>V.getCategories()});if(!t)return null;const i=t.data.data.products,s=i.length>0||i.length==0&&(r.price_min||r.price_max||r.rating_filter||r.category);return o("div",{className:"bg-gray-200 py-6",children:[o(H,{children:[o("title",{children:[a("home")," | Shopee Clone"]}),e("meta",{name:"description",content:"Trang ch\u1EE7 d\u1EF1 \xE1n Shopee Clone"})]}),e("div",{className:"container",children:o("div",{className:"grid grid-cols-12 gap-6",children:[s&&e("div",{className:"col-span-3",children:e(K,{queryConfig:{...r,page:"1"},categories:(l==null?void 0:l.data.data)||[]})}),i.length>0&&o("div",{className:"col-span-9",children:[e(M,{queryConfig:r}),e("div",{className:"mt-6 grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",children:i.map(c=>e("div",{className:"col-span-1",children:e(W,{product:c})},c._id))}),e(Q,{queryConfig:r,pageSize:t.data.data.pagination.page_size})]}),i.length==0&&e("div",{className:f({"col-span-9":s,"col-span-12":!s}),children:o("div",{className:"flex h-[500px] flex-col items-center justify-center  p-2",children:[e("img",{src:J,alt:"no purchase",className:"h-[160px] w-[160px]"}),e("div",{className:"mt-3 capitalize",children:a("no_result_found")})]})})]})})]})}export{ee as default};
