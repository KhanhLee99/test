import{u as x,c as g,o as b,d as v,B as N,k as y,i as E,j as r,H as _,e,D as S,f as M}from"./index.d2c701b9.js";import{B as P}from"./Button.e6363547.js";import{I as l}from"./InputPassword.41f7f68e.js";import{u as z}from"./user.api.af6bdcc8.js";const I=S.pick(["password","new_password","confirm_password"]);function k(){const{t:s}=x(),{register:o,handleSubmit:p,reset:u,setError:w,formState:{errors:f}}=g({defaultValues:{password:"",new_password:"",confirm_password:""},resolver:b(I),shouldFocusError:!1}),t=v({mutationFn:z.updateProfile,onSuccess:a=>{N.success(a.data.message,{position:"top-center",autoClose:1e3}),u()}}),h=p(a=>{t.mutate(y.exports.omit(a,["confirm_password"]),{onError:m=>{var i;if(E(m)){const d=(i=m.response)==null?void 0:i.data.data;d&&Object.keys(d).forEach(c=>{w(c,{message:d[c],type:"Server"})})}}})}),n=a=>M(f,a);return r("div",{className:"rounded-sm bg-white px-2 pb-10 shadow md:px-7 md:pb-20",children:[r(_,{children:[r("title",{children:[s("my profile")," | Shopee Clone"]}),e("meta",{name:"description",content:"Trang th\xF4ng tin c\xE1 nh\xE2n"})]}),r("div",{className:"border-b border-b-gray-200 py-6",children:[e("h1",{className:"text-lg font-medium capitalize text-gray-900",children:s("change password")}),e("div",{className:"mt-1 text-sm text-gray-700",children:s("protect account")})]}),e("form",{className:"mt-8 mr-auto max-w-3xl",onSubmit:h,children:r("div",{className:"mt-6 flex-grow md:mt-0 md:pr-12",children:[r("div",{className:"relative mt-2 flex flex-col flex-wrap sm:flex-row",children:[e("div",{className:"truncate pt-3 capitalize sm:w-[30%] sm:text-right",children:s("current password")}),e("div",{className:"sm:w-[70%] sm:pl-5",children:e(l,{classNameInput:"w-full rounded-sm border border-gray-300 px-3 py-2 outline-none focus:border-gray-500 focus:shadow-sm",name:"password",placeholder:s("current password"),errorMessage:n("password"),register:o})})]}),r("div",{className:"relative mt-2 flex flex-col flex-wrap sm:flex-row",children:[e("div",{className:"truncate pt-3 capitalize sm:w-[30%] sm:text-right",children:s("new password")}),e("div",{className:"sm:w-[70%] sm:pl-5",children:e(l,{classNameInput:"w-full rounded-sm border border-gray-300 px-3 py-2 outline-none focus:border-gray-500 focus:shadow-sm",name:"new_password",placeholder:s("new password"),errorMessage:n("new_password"),register:o})})]}),r("div",{className:"relative mt-2 flex flex-col flex-wrap sm:flex-row",children:[e("div",{className:"truncate pt-3 capitalize sm:w-[30%] sm:text-right",children:s("confirm password")}),e("div",{className:"sm:w-[70%] sm:pl-5",children:e(l,{classNameInput:"w-full rounded-sm border border-gray-300 px-3 py-2 outline-none focus:border-gray-500 focus:shadow-sm",name:"confirm_password",placeholder:s("confirm password"),errorMessage:n("confirm_password"),register:o})})]}),r("div",{className:"mt-2 flex flex-col flex-wrap sm:flex-row",children:[e("div",{className:"truncate pt-3 capitalize sm:w-[30%] sm:text-right"}),e("div",{className:"sm:w-[70%] sm:pl-5",children:e(P,{className:"flex h-9 items-center rounded-sm bg-orange px-5 text-center text-sm text-white hover:bg-orange/80",type:"submit",isLoading:t.isPending,disabled:t.isPending,children:s("save")})})]})]})})]})}export{k as default};
